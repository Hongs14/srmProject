<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team01.webapp.develop.dao.IDevelopRepository">
	
	<select id="totalRow" resultType="int">
		select count(*) from sr where stts_no = 4 or stts_no = 5 or stts_no=6
	</select>
	
	<select id="selectDevelopList" parameterType="pager" resultType="com.team01.webapp.model.SrDevelopDto">
		<![CDATA[
			select rnum, 
					sr_no AS srNo, 
					sr_cust_no AS srCustId, 
					sys_no AS sysNo, 
					stts_no AS sttsNo, 
					sr_ttl AS srTtl, 
					sr_cn AS srCn, 
					sr_reg_date AS srRegDate, 
					sr_pry AS srPry, 
					sr_opnn AS srOppn, 
					sr_bgt AS srBgt, 
	            	sr_dev_cn AS srDevCn, 
	            	sr_ddln_date AS srDdlnDate, 
	            	sr_start_date AS srStartDate, 
	            	sr_end_date AS srEndDate, 
	            	sr_view_yn AS srViewYn, 
	            	sr_type AS srType,
	            	user_nm AS userNm, 
	            	user_ogdp AS userOgdp, 
	            	user_dp_nm AS userDpNm
			from(
			   	select rownum as rnum, sr_no, sr_cust_no, sys_no, aa.stts_no, sr_ttl, sr_cn, sr_reg_date, sr_pry, sr_opnn, sr_bgt, 
		            sr_dev_cn, sr_ddln_date, sr_start_date, sr_end_date, sr_view_yn, aa.sr_type,  user_nm, user_ogdp, user_dp_nm
			   	from(
			      select  sr_no, sr_cust_no, sys_no, sr.stts_no, sr_ttl, sr_cn, sr_reg_date, sr_pry, sr_opnn, sr_bgt, 
		            sr_dev_cn, sr_ddln_date, sr_start_date, sr_end_date, sr_view_yn, sr.sr_type, user_nm, user_ogdp, user_dp_nm
			      from sr, sr_type, sr_stts, users
		          where sr.stts_no = sr_stts.stts_no and sr.sr_cust_no = users.user_no and sr.sr_type = sr_type.sr_type_no and sr.stts_no = 4 or sr.stts_no = 5 or sr.stts_no=6
			      order by sr_no desc
			    ) aa
		    where rownum <= #{endRowNo}
			)
			where rnum >= #{startRowNo}
		]]>
	</select>
	
</mapper>